# EZ Manual Simplifier プロジェクト要件定義書（改訂版）

## プロジェクト概要

### 背景と目的

**解決したい課題**:
- 専門用語だらけのドキュメント（GitHub docs等）は非エンジニア・初心者には理解不可能
- 専門用語すら分からないため、文脈が繋がらない
- マニュアルは「できる人」目線で書かれているため読まれない

**目指すソリューション**:
- 複雑なマニュアルを「要約ではなく簡易化」
- 専門用語 → 平易な言葉
- 抽象的説明 → 具体的な比喩
- テキストのみ → 画像で視覚化（将来）
- 概念説明 → ステップバイステップの手順

**参考モデル**: NotebookLM + α（外部要素、比喩、画像）

### ターゲットユーザー

- **情報受取側**: 複雑な説明書に困っている非エンジニア、初心者
- **情報提供側**: わかりやすいマニュアルを作りたい人
- **開発者本人**: まず自分が使ってテストする（非エンジニア、パートタイム開発）

### 差別化要因

| 既存ツール | 本プロダクト |
|-----------|-------------|
| NotebookLM: ソースに忠実すぎる | より積極的な簡易化 |
| AIチャット: 単発の質問回答 | URL→マニュアル全体を変換 |
| 要約ツール: 情報を削除 | 情報は削除せず言い換え |

---

## Phase 1: マニュアル簡易化サイト（3週間）

### 開発アプローチ

**UIファースト開発**:
```
Week 1: UI作成（モックデータ）
  ↓ デザイン確認
Week 2: バックエンド構築
  ↓ 統合
Week 3: テスト＆改善
```

### 機能要件

#### 1. **URL変換機能**（最優先・コア価値）

**入力**:
- GitHub docs URL（例: https://docs.github.com/en/pull-requests）
- 他のドキュメントサイトURL（将来拡張）

**処理**:
1. Webスクレイピング（コンテンツ取得）
2. 構造解析（見出し、コードブロック等）
3. 専門用語抽出
4. LLM処理:
   - 専門用語 → 平易な言葉 + 比喩
   - 抽象的 → 具体例
   - テキスト → ステップバイステップ
5. マニュアル再構成

**出力**:
- ビフォー・アフター並列表示
- HTML/Markdown/テキスト形式でダウンロード

#### 2. **テキスト入力対応**

- 直接テキストを貼り付けて簡易化
- URL変換の補助機能として

#### 3. **ファイルアップロード対応**（Phase 1後半）

- PDF, DOCX, PPTX, XLSX等
- 既存の `src/converter.py` を活用

#### 4. **簡易化レベル**

- **簡単（low）**: 小学生でも分かるレベル
- **普通（medium）**: 一般的な読みやすさ（デフォルト）
- **詳しく（high）**: 専門用語は残しつつ説明追加

#### 5. **Webインターフェース**

**デザイン方針**:
- シンプルで直感的
- 美しいUI/UX（Linear, Notion, Vercel参考）
- レスポンシブデザイン（PC/スマホ対応）
- 面倒なことをさせない（ユーザーフレンドリー）

**主要画面**:
- トップページ（URL/テキスト入力）
- 結果表示（ビフォー・アフター並列）
- ダウンロード機能

### 技術仕様

#### アーキテクチャ

```
┌─────────────────────────────────────┐
│ フロントエンド（GitHub Pages）       │
│ - 静的HTML + CSS + JavaScript       │
│ - URL入力、結果表示                  │
│ - ユーザーインターフェース            │
└─────────┬───────────────────────────┘
          │
          ▼
┌─────────────────────────────────────┐
│ バックエンド（Cloudflare Workers）   │
│ - Webスクレイピング                  │
│ - LLM API呼び出し                    │
│ - GitHub Secretsから環境変数取得     │
│ - キャッシュ管理（Cloudflare R2）    │
└─────────────────────────────────────┘
          │
          ▼
┌─────────────────────────────────────┐
│ LLM API                             │
│ - Gemini Pro（無料枠: 1日15リクエスト）│
│ - OpenAI API（予備: $5課金済み）     │
└─────────────────────────────────────┘
```

#### フロントエンド

- **技術**: HTML5, CSS3, Vanilla JavaScript
- **デプロイ**: GitHub Pages（無料）
- **ファイル構成**:
  ```
  web/
    ├─ index.html          # メインページ
    ├─ css/
    │   └─ style.css       # デザイン
    ├─ js/
    │   ├─ app.js          # メインロジック
    │   ├─ ui.js           # UI操作
    │   └─ mock-data.js    # モックデータ（Week 1）
    └─ assets/
        └─ icons/          # アイコン
  ```

#### バックエンド

- **技術**: JavaScript/Node.js（Cloudflare Workers）
- **デプロイ**: GitHub Actions自動デプロイ
- **環境変数**: GitHub Secrets
- **ファイル構成**:
  ```
  api/
    ├─ index.js           # メインエンドポイント
    ├─ scraper.js         # URL取得
    ├─ simplifier.js      # 簡易化ロジック
    ├─ llm.js             # LLM統合
    └─ wrangler.toml      # Cloudflare設定
  ```

#### LLM選択

**優先順位**:
1. **Gemini 1.5 Pro（無料枠）**: 1日15リクエスト、テスト段階で十分
2. **OpenAI GPT-4o（予備）**: $5課金済み、無料枠使い切ったら切り替え

**将来検討**:
- Claude 3.5 Sonnet（品質重視の場合）
- ローカルLLM（完全無料化）

#### MCP活用

- **fetch MCP**: URL取得、Webスクレイピング
- **その他**: 必要に応じて追加（現時点では保留）

#### セキュリティ

**APIキー保護**:
```
GitHub Secrets
  ↓
GitHub Actions（デプロイ時）
  ↓
Cloudflare Workers環境変数
  ↓
バックエンドで使用（ブラウザに露出しない）
```

#### CI/CD

```
.github/workflows/
  ├─ deploy-frontend.yml    # フロントエンドデプロイ
  └─ deploy-api.yml         # バックエンドデプロイ
```

### 非機能要件

- **レスポンス時間**: 10秒以内
- **可用性**: 99%以上（無料プラットフォーム依存）
- **セキュリティ**: 
  - HTTPS必須
  - APIキー完全保護
  - 入力検証
- **コスト**: 完全無料構成（無料枠内運用）

---

## Phase 1 タスク分解

### Week 1: UIファースト（3-4日）

#### TASK-UI-001: 基本レイアウト作成
- URL入力フォーム
- レベル選択
- 変換ボタン

#### TASK-UI-002: 結果表示UI作成
- ビフォー・アフター並列表示
- スクロール対応
- レスポンシブデザイン

#### TASK-UI-003: モックデータ統合
- サンプルドキュメント
- 簡易化済みバージョン
- ボタンクリックで表示

#### TASK-UI-004: UI/UX改善
- アニメーション
- ローディング表示
- エラーメッセージ

### Week 2: バックエンド構築（5-7日）

#### TASK-BACKEND-001: Cloudflare Workersセットアップ
- プロジェクト初期化
- wrangler.toml設定

#### TASK-BACKEND-002: URL取得機能
- Webスクレイピング実装
- fetch MCP統合（オプション）
- エラーハンドリング

#### TASK-BACKEND-003: LLM統合
- Gemini API呼び出し
- プロンプトテンプレート
- レスポンス処理

#### TASK-BACKEND-004: GitHub Secrets設定
- GEMINI_API_KEY登録
- CLOUDFLARE_API_TOKEN登録
- 環境変数管理

#### TASK-BACKEND-005: GitHub Actionsセットアップ
- デプロイワークフロー作成
- 自動デプロイ設定

### Week 3: 統合＆テスト（3-5日）

#### TASK-INT-001: フロントエンド・バックエンド統合
- API呼び出し実装
- モックデータ削除

#### TASK-INT-002: テスト実施
- URL変換テスト（GitHub docs）
- エラーケーステスト
- レスポンシブテスト

#### TASK-INT-003: デプロイ
- GitHub Pages公開
- 動作確認

---

## 既存実装の扱い

### 保留（将来使用）

```
src/
  ├─ converter.py        # ファイルアップロード対応時に使用
  └─ simplifier.py       # Python実装の参考として保持

tests/
  ├─ test_converter.py
  └─ test_simplifier_integration.py
```

**理由**:
- URL変換が最優先（JavaScript実装）
- ファイルアップロードは Phase 1後半で検討
- Python実装は将来的な機能拡張用に保持

---

## Phase 2以降（将来拡張）

### Phase 2: 機能拡張（時期未定）

- チャット形式対応
- 画像の自動挿入
- リサーチ機能（MCP活用）
- 多様なドキュメントソース対応

### Phase 3: ウェブサイト作成への転用（時期未定）

- マニュアル簡易化で価値を証明してから検討
- 有料化の可能性

---

## 制約条件

### コスト制約

- **ゼロコスト運用**: 無料枠のみ使用
  - GitHub Pages: 無料
  - Cloudflare Workers: 100k req/日（無料）
  - Gemini API: 15 req/日（無料）
  - GitHub Actions: 2000分/月（無料）
  
- **キャッシュ徹底活用**: 同じURL再変換しない

### 開発制約

- **開発者**: 非エンジニア、パートタイム
- **開発体制**: エージェントオーケストラ活用
- **開発期間**: 3週間（Phase 1）

### 技術制約

- **既存リポジトリ使用**: 現行リポジトリを再構成
- **ブラウザ対応**: モダンブラウザのみ（IE非対応）
- **セキュリティ**: APIキー絶対露出禁止

---

## 成功指標

### Phase 1完了条件

- [ ] URL変換機能が動作（GitHub docs変換成功）
- [ ] UIが美しく使いやすい
- [ ] 簡易化の品質が良い（小学生でも理解できる）
- [ ] APIキーが完全に保護されている
- [ ] 完全無料で運用できている
- [ ] 開発者本人が満足して使える

### 判断基準

**良い結果**:
- URL変換で期待する簡易化ができる
- 新人社員に試してもらって理解できる
- → Phase 2へ進む

**ダメな結果**:
- 簡易化の質が低い
- URL取得が不安定
- → 方針転換 or 撤退

---

## リスク管理

### 技術リスク

1. **Webスクレイピングの制限**
   - 対策: robots.txt確認、レート制限遵守
   
2. **LLM品質の不足**
   - 対策: プロンプト改善、Claude APIへ切り替え

3. **無料枠の限界**
   - 対策: キャッシュ徹底、ユーザー制限

### 開発リスク

1. **時間不足**
   - 対策: スコープを絞る、段階的開発

2. **技術的困難**
   - 対策: エージェントオーケストラ活用

---

## 関連ドキュメント

- [タスク一覧](./TASKS.md)
- [実装サマリー](./IMPLEMENTATION_SUMMARY.md)
- [進捗管理](./PROGRESS_TRACKING.md)
- [エージェントオーケストラ体制](./AGENT_ORCHESTRATION.md)
- [コスト最適化ガイドライン](./COST_OPTIMIZATION.md)

---

**作成日**: 2024年12月
**最終更新**: 2025年11月1日
**バージョン**: 3.0（大幅改訂）
**作成者**: kazu-4728
**更新者**: Orchestrator Agent
