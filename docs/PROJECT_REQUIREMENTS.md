# EZ Manual Simplifier プロジェクト要件定義書（完全版）

## 更新日: 2025年11月1日

---

## 📌 このドキュメントについて

**重要**: このドキュメントはプロジェクト全体の**唯一の真実の情報源（Single Source of Truth）**です。

- すべてのエージェント（Orchestrator、Copilot、GPT、Gemini CLI、Codex等）はこのドキュメントを参照
- 方針変更時はこのドキュメントを更新
- フェーズ進行時もこのドキュメントで管理
- 進捗管理も一元化

---

## 🎯 プロジェクトの背景と目的

### 解決したい課題

**根本的な問題**:
- 専門用語だらけのドキュメント（GitHub docs、技術文書等）は非エンジニア・初心者には理解不可能
- 専門用語すら分からないため、文脈が繋がらない
- マニュアルは「できる人」目線で書かれており読まれない
- 新人教育で同じ説明を繰り返す無駄

**実例**:
- GitHub docsを読んでも非エンジニアには全く分からない
- 新人に作業を指導しても専門用語で躓く
- 画像、比喩、具体例のあるマニュアルがほとんどない

### 目指すソリューション

**コンセプト**: NotebookLM + α（外部要素、比喩、画像）

```
複雑なマニュアル（URL/ファイル）
  ↓
自動変換
  ↓
小学生でも分かるマニュアル
  - 専門用語 → 平易な言葉
  - 抽象的 → 具体的な比喩
  - テキストのみ → 画像付き
  - 概念説明 → ステップバイステップ
```

### 差別化要因

| 既存ツール | 本プロダクト |
|-----------|-------------|
| NotebookLM: ソースに忠実すぎる | より積極的な簡易化 |
| AIチャット: 単発の質問回答 | URL→マニュアル全体を変換 |
| 要約ツール: 情報を削除 | 情報は削除せず言い換え |
| Grammarly: 英語のみ | 日本語対応、マニュアル特化 |

---

## 🗺️ 全体ロードマップ

### Phase 1: テスト段階（3週間）
**目的**: コア価値の検証、個人使用
**ユーザー**: プロダクトオーナーのみ
**デプロイ**: 非公開

### Phase 2: 本格運用（4-6週間）
**目的**: 公開、実ユーザーへの価値提供
**ユーザー**: 一般公開
**デプロイ**: GitHub Pages（公開）

### Phase 3: フルスタック（2-3ヶ月）
**目的**: スケール、高度な機能
**ユーザー**: 多数のユーザー
**デプロイ**: 本格インフラ

### Phase 4: ウェブサイト作成への転用（時期未定）
**目的**: ピボット、収益化
**ユーザー**: エンタープライズ
**デプロイ**: 有料サービス

---

## 📋 Phase 1: テスト段階（3週間）

### 目的
- コア価値の検証（URL変換が本当に使えるか）
- UIファースト開発
- プロダクトオーナーによるテスト
- 技術スタックの検証

### スコープ

**含まれるもの**:
- ✅ URL変換（GitHub docs）
- ✅ 3段階のレベル（low/medium/high）
- ✅ ビフォー・アフター表示
- ✅ HTML/Markdown/テキスト出力
- ✅ 美しいUI/UX

**含まれないもの**:
- ❌ ファイルアップロード
- ❌ 画像自動挿入
- ❌ チャット形式
- ❌ ユーザー認証
- ❌ データベース

### 技術構成（Phase 1）

```
┌─────────────────────────────────────┐
│ フロントエンド（GitHub Pages）       │
│ - 静的HTML + CSS + JavaScript       │
└─────────┬───────────────────────────┘
          │
          ▼
┌─────────────────────────────────────┐
│ バックエンド（Cloudflare Workers）   │
│ - Webスクレイピング                  │
│ - LLM API呼び出し                    │
│ - GitHub Secrets（APIキー保護）      │
└─────────┬───────────────────────────┘
          │
          ▼
┌─────────────────────────────────────┐
│ LLM API                             │
│ - Gemini Pro（無料枠、テスト用）     │
│ - OpenAI API（予備、$5課金済み）     │
└─────────────────────────────────────┘
```

**コスト**: 完全無料（無料枠のみ）

### 開発スケジュール（Phase 1）

**Week 1: UIファースト**（3-4日）
- TASK-UI-001〜004
- モックデータで動作確認
- デザイン承認

**Week 2: バックエンド構築**（5-7日）
- TASK-BACKEND-001〜006
- 実際のAPI統合
- 自動デプロイ

**Week 3: 統合＆テスト**（3-5日）
- TASK-INT-001〜003
- プロダクトオーナーによるテスト
- 判断：Phase 2へ進む or 方針転換

### 判断基準（Phase 1完了時）

**成功条件**:
- [ ] GitHub docsのURL変換が成功する
- [ ] 簡易化の質が良い（小学生でも理解できる）
- [ ] UIが美しく使いやすい
- [ ] プロダクトオーナーが「これは便利だ」と感じる

**判断**:
- ✅ 成功 → Phase 2へ進む
- ❌ 失敗 → 方針転換 or 撤退

---

## 📋 Phase 2: 本格運用（4-6週間）

### 目的
- 一般公開
- 実ユーザーへの価値提供
- フィードバック収集
- 機能拡張

### スコープ

**Phase 1からの追加**:
- ✅ ファイルアップロード（PDF、DOCX、PPTX）
- ✅ より多様なURL対応（Qiita、Zenn、Medium等）
- ✅ キャッシュ機能（同じURL再変換しない）
- ✅ ユーザーフィードバック機能
- ✅ SEO対応
- ✅ アクセス解析（Google Analytics）

**引き続き含まれないもの**:
- ❌ ユーザー認証
- ❌ データベース（キャッシュのみCloudflare R2）
- ❌ 画像自動挿入（Phase 3へ）

### 技術構成の選択肢（Phase 2）

#### **プランA: Phase 1構成を維持**（推奨）

```
GitHub Pages + Cloudflare Workers + LLM API
```

**利点**:
- ✅ Phase 1からの移行がスムーズ
- ✅ 引き続き無料枠で運用可能
- ✅ シンプル

**欠点**:
- ⚠️ ファイルアップロードがやや複雑
- ⚠️ スケーリングに限界

**コスト**: $0〜$10/月

---

#### **プランB: Next.js + Vercel**

```
Next.js (Vercel) + Vercel Serverless Functions + LLM API
```

**利点**:
- ✅ ファイルアップロードが簡単
- ✅ API Routesで統合的
- ✅ スケーラブル

**欠点**:
- ⚠️ Phase 1からの移行コスト
- ⚠️ 技術スタック変更

**コスト**: $0〜$20/月（Vercel Pro）

---

#### **プランC: Python Backend追加**

```
GitHub Pages + Python Backend (Cloud Run) + LLM API
```

**利点**:
- ✅ 既存の `src/converter.py` 活用
- ✅ ファイル処理がPythonで楽
- ✅ 将来の拡張性

**欠点**:
- ⚠️ インフラ複雑化
- ⚠️ コスト増加

**コスト**: $10〜$30/月（Cloud Run）

---

### 推奨（Phase 2）

**プランA**（Phase 1構成維持）を推奨

理由:
- まず公開して反応を見る
- ファイルアップロードはPhase 1の`src/converter.py`をCloudflare Workersから呼び出せば可能
- スケール問題は実際に起きてから対処

### 開発スケジュール（Phase 2）

**Week 1-2: ファイルアップロード対応**
- `src/converter.py` の活用
- Cloudflare Workersとの統合

**Week 3: URL対応拡大**
- Qiita、Zenn、Medium等
- スクレイピングルール追加

**Week 4: ユーザー機能**
- フィードバックフォーム
- エラーレポート
- FAQ

**Week 5-6: 公開準備**
- SEO対策
- アクセス解析
- ドキュメント整備
- 一般公開

### 判断基準（Phase 2完了時）

**成功条件**:
- [ ] 月間100ユーザー以上
- [ ] ポジティブなフィードバック
- [ ] コストが$50/月以下
- [ ] 技術的問題なし

**判断**:
- ✅ 成功 → Phase 3へ進む
- ⚠️ 微妙 → Phase 2で継続改善
- ❌ 失敗 → ピボット検討

---

## 📋 Phase 3: フルスタック（2-3ヶ月）

### 目的
- 本格的なサービスとして運用
- 高度な機能追加
- スケーラビリティ確保
- ユーザー体験の向上

### スコープ

**Phase 2からの追加**:
- ✅ 画像自動挿入（Unsplash API、DALL-E等）
- ✅ チャット形式対応
- ✅ ユーザー認証（オプション）
- ✅ データベース（ユーザー設定、変換履歴）
- ✅ API公開（他サービスからの利用）
- ✅ プレミアム機能（将来の収益化準備）

### 技術構成の選択肢（Phase 3）

#### **プランA: フルスタックフレームワーク**（推奨）

```
Next.js (App Router)
  ├─ フロントエンド（React）
  ├─ API Routes（バックエンド）
  ├─ データベース（Supabase/Vercel Postgres）
  └─ 認証（NextAuth.js）
```

**デプロイ**: Vercel

**利点**:
- ✅ 統合的な開発体験
- ✅ スケーラブル
- ✅ 最新技術

**欠点**:
- ⚠️ Phase 2からの大幅な移行
- ⚠️ コスト増加

**コスト**: $20〜$100/月

---

#### **プランB: マイクロサービス化**

```
フロントエンド（GitHub Pages/Vercel）
  ↓
API Gateway
  ├─ URL変換サービス（Cloudflare Workers）
  ├─ ファイル処理サービス（Cloud Run）
  ├─ 画像生成サービス（Lambda）
  └─ チャット処理サービス（Cloud Functions）
```

**利点**:
- ✅ 各サービス独立
- ✅ 段階的移行可能
- ✅ 技術選択の自由度

**欠点**:
- ⚠️ 複雑化
- ⚠️ 運用コスト
- ⚠️ デバッグ困難

**コスト**: $50〜$200/月

---

#### **プランC: モノリス（Python Backend）**

```
フロントエンド（React）
  ↓
Python Backend（FastAPI）
  ├─ すべての処理を統合
  └─ PostgreSQL
```

**デプロイ**: Cloud Run / Railway

**利点**:
- ✅ 既存のPython実装活用
- ✅ シンプルなアーキテクチャ
- ✅ デバッグしやすい

**欠点**:
- ⚠️ スケーリング制限
- ⚠️ Python Webアプリの運用負荷

**コスト**: $30〜$150/月

---

### 推奨（Phase 3）

**プランA**（Next.js フルスタック）を推奨

理由:
- モダンな技術スタック
- 開発効率が高い
- スケーラビリティ確保
- 将来の拡張性

ただし、**Phase 2の実績次第で判断**

### 開発スケジュール（Phase 3）

**Week 1-4: アーキテクチャ移行**
- Next.jsへの移行
- データベース設計・構築
- 既存機能の再実装

**Week 5-6: 画像機能**
- Unsplash API統合
- 画像自動挿入ロジック

**Week 7-8: チャット機能**
- チャットUI実装
- ストリーミングレスポンス
- コンテキスト保持

**Week 9-10: 認証・プレミアム準備**
- NextAuth.js統合
- ユーザー管理
- プレミアム機能の枠組み

**Week 11-12: テスト・公開**
- 統合テスト
- パフォーマンス最適化
- 正式リリース

### 判断基準（Phase 3完了時）

**成功条件**:
- [ ] 月間1000ユーザー以上
- [ ] チャーン率 < 20%
- [ ] 技術的負債が少ない
- [ ] コストがユーザー数に見合っている

**判断**:
- ✅ 成功 → Phase 4（ピボット）検討
- ⚠️ 微妙 → Phase 3で改善継続
- ❌ 失敗 → 現状維持 or サービス停止

---

## 📋 Phase 4: ウェブサイト作成への転用（時期未定）

### 目的
- マニュアル簡易化からウェブサイト作成へピボット
- 収益化
- エンタープライズ対応

### スコープ（仮）

**新機能**:
- ✅ マニュアルからWebサイト自動生成
- ✅ デザインテンプレート
- ✅ ホスティング統合
- ✅ カスタムドメイン
- ✅ 有料プラン

### 技術構成（Phase 4）

Phase 3完了後に再検討

**現時点での想定**:
- テンプレートエンジン
- 静的サイトジェネレータ
- ホスティング統合（Vercel、Netlify等）

### 判断基準（Phase 4検討時）

**検討条件**:
- Phase 3で確実な価値提供ができている
- マニュアル簡易化での収益化が見えている
- ウェブサイト作成市場での差別化が明確

**判断**:
- ✅ 条件満たす → Phase 4開始
- ❌ 条件満たさない → Phase 3継続 or 別の方向性

---

## 🤖 エージェントオーケストラ体制

### 統一入り口

**唯一の真実の情報源**: `docs/PROJECT_REQUIREMENTS.md`（このファイル）

すべてのエージェントはこのファイルを参照：
- Orchestrator（統括）
- Copilot Agent（コード支援）
- GPT Agent（コンテキスト処理）
- Gemini CLI（リサーチ）
- Codex（実装）
- その他サブエージェント

### エージェント定義

#### **Orchestrator（マスターエージェント）**
- **役割**: 全体統括、タスク分解、エージェント割り振り
- **参照**: すべてのドキュメント
- **制約**: 必ず`PROJECT_REQUIREMENTS.md`の最新版を確認

#### **Copilot Agent**
- **役割**: コード補完、リアルタイム支援
- **参照**: 実装中のファイル、関連ドキュメント
- **使用場面**: コーディング中

#### **GPT Agent**
- **役割**: 長文処理、コンテキスト理解
- **参照**: `docs/`ディレクトリ全体
- **使用場面**: 複雑な要件理解、ドキュメント生成

#### **Gemini CLI**
- **役割**: リサーチ、外部情報取得
- **参照**: `PROJECT_REQUIREMENTS.md`の目的セクション
- **使用場面**: 技術調査、競合分析

#### **Codex**
- **役割**: 具体的な実装、バグ修正
- **参照**: タスク定義、技術仕様
- **使用場面**: 実装フェーズ

#### **Frontend Sub-Agent**
- **役割**: UI/UX実装
- **参照**: デザイン仕様、Phase定義
- **作業範囲**: `web/`ディレクトリ

#### **Backend Sub-Agent**
- **役割**: API実装
- **参照**: 技術構成、Phase定義
- **作業範囲**: `api/`ディレクトリ

#### **Simplifier Sub-Agent**
- **役割**: LLM統合、簡易化ロジック
- **参照**: Phase定義、プロンプト戦略
- **作業範囲**: `api/llm.js`、`api/simplifier.js`

### エージェント連携フロー

```
ユーザー指示
  ↓
Orchestrator（タスク分解）
  ↓
適切なエージェントへ割り振り
  ├─ Copilot Agent（コード支援）
  ├─ GPT Agent（コンテキスト処理）
  ├─ Gemini CLI（リサーチ）
  ├─ Codex（実装）
  └─ Sub-Agents（専門作業）
  ↓
作業完了・統合
  ↓
Orchestrator（レビュー）
  ↓
ユーザーへ報告
```

### 方針転換時のプロセス

1. **トリガー**: Phase完了時の判断、重大な技術的問題、ユーザーフィードバック
2. **Orchestratorが分析**: 現状評価、選択肢の提示
3. **プロダクトオーナー判断**: 方針決定
4. **`PROJECT_REQUIREMENTS.md`更新**: 新しい方針を反映
5. **全エージェントに通知**: 最新版を参照させる
6. **タスク再定義**: `TASKS.md`更新
7. **作業再開**: 新しい方針で進行

---

## 📊 進捗管理の一元化

### 進捗管理ドキュメント

**`docs/PROGRESS_TRACKING.md`**: 全Phaseの進捗を一元管理

```
Phase 1: 0% → 30% → 100%
Phase 2: 0% → 50% → 100%
Phase 3: 0% → ...
Phase 4: 0% → ...
```

### マイルストーン

**Phase 1完了**: Week 3終了時
**Phase 2開始判断**: Phase 1完了後即座
**Phase 2完了**: Phase 1完了後4-6週間
**Phase 3開始判断**: Phase 2完了後
**Phase 4検討**: Phase 3完了後

### リスク管理

各Phaseでの主要リスク:
- **Phase 1**: 技術検証失敗、LLM品質不足
- **Phase 2**: ユーザー獲得失敗、コスト超過
- **Phase 3**: スケーリング問題、技術的負債
- **Phase 4**: ピボット失敗、市場適合性

---

## 🔐 セキュリティ・コスト

### セキュリティ

**全Phase共通**:
- APIキー絶対保護（GitHub Secrets）
- HTTPS必須
- 入力検証

**Phase 3以降**:
- ユーザー認証
- データ暗号化
- GDPR対応

### コスト管理

| Phase | 目標コスト | 許容コスト |
|-------|----------|-----------|
| Phase 1 | $0/月 | $10/月 |
| Phase 2 | $10/月 | $50/月 |
| Phase 3 | $50/月 | $200/月 |
| Phase 4 | $100/月 | $500/月 |

---

## 📚 関連ドキュメント

- [タスク一覧](./TASKS.md) - 具体的なタスク定義
- [実装サマリー](./IMPLEMENTATION_SUMMARY.md) - 技術詳細
- [進捗管理](./PROGRESS_TRACKING.md) - 進捗の一元管理
- [エージェントオーケストラ体制](./AGENT_ORCHESTRATION.md) - エージェント詳細
- [リポジトリ構成](./REPOSITORY_STRUCTURE.md) - ファイル配置

---

## 🎯 現在地

**現在**: Phase 1準備完了

**次のアクション**: TASK-UI-001（基本レイアウト作成）

**開始コマンド**: 「TASK-UI-001を開始してください」

---

**最終更新**: 2025年11月1日
**バージョン**: 4.0（完全版・全Phase定義）
**作成者**: kazu-4728
**更新者**: Orchestrator Agent
